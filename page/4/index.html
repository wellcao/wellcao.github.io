<!DOCTYPE html>

<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
    <meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="theme-color" content="#222">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">

    <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">


    <link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

    <link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


    <link rel="icon" type="image/png" sizes="32x32" href="/images/ava.jpg?v=5.1.4">


    <link rel="icon" type="image/png" sizes="16x16" href="/images/ava.jpg?v=5.1.4">


    <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">


    <meta name="keywords" content="Hexo, NexT">


    <meta name="keywords" content="hack、share">
    <meta property="og:type" content="website">
    <meta property="og:title" content="失落者-灵魂拷问">
    <meta property="og:url" content="http://yoursite.com/page/4/index.html">
    <meta property="og:site_name" content="Sec-Communication">
    <meta property="og:locale" content="zh-Hans">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Sec-Communication">


    <script type="text/javascript" id="hexo.configurations">
        var NexT = window.NexT || {};
        var CONFIG = {
            root: '/',
            scheme: 'Mist',
            version: '5.1.4',
            sidebar: {
                "position": "left",
                "display": "post",
                "offset": 12,
                "b2t": false,
                "scrollpercent": false,
                "onmobile": false
            },
            fancybox: true,
            tabs: true,
            motion: {
                "enable": true,
                "async": false,
                "transition": {
                    "post_block": "fadeIn",
                    "post_header": "slideDownIn",
                    "post_body": "slideDownIn",
                    "coll_header": "slideLeftIn",
                    "sidebar": "slideUpIn"
                }
            },
            duoshuo: {
                userId: '0',
                author: '博主'
            },
            algolia: {
                applicationID: '',
                apiKey: '',
                indexName: '',
                hits: {"per_page": 10},
                labels: {
                    "input_placeholder": "Search for Posts",
                    "hits_empty": "We didn't find any results for the search: ${query}",
                    "hits_stats": "${hits} results found in ${time} ms"
                }
            }
        };
    </script>


    <link rel="canonical" href="http://yoursite.com/page/4/">


    <title>失落者-灵魂拷问</title>


</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">


<div class="container sidebar-position-left
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
        <div class="header-inner">
            <div class="site-brand-wrapper">
                <div class="site-meta ">


                    <div class="custom-logo-site-title">
                        <a href="/" class="brand" rel="start">
                            <span class="logo-line-before"><i></i></span>
                            <span class="site-title">Sec-Communication</span>
                            <span class="logo-line-after"><i></i></span>
                        </a>
                    </div>

                    <p class="site-subtitle"></p>

                </div>

                <div class="site-nav-toggle">
                    <button>
                        <span class="btn-bar"></span>
                        <span class="btn-bar"></span>
                        <span class="btn-bar"></span>
                    </button>
                </div>
            </div>

            <nav class="site-nav">
                <ul id="menu" class="menu">
                    <li class="menu-item menu-item-home">
                        <a href="/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
                            首页
                        </a>
                    </li>
                    <li class="menu-item menu-item-about">
                        <a href="/about/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
                            关于
                        </a>
                    </li>
                    <li class="menu-item menu-item-tags">
                        <a href="/tags/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
                            标签
                        </a>
                    </li>
                    <li class="menu-item menu-item-categories">
                        <a href="/categories/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
                            分类
                        </a>
                    </li>

                    <li class="menu-item menu-item-archives">
                        <a href="/archives/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
                            归档
                        </a>
                    </li>
                    <li class="menu-item menu-item-search">
                        <a href="javascript:;" class="popup-trigger">
                            <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
                            搜索
                        </a>
                    </li>

                </ul>

                <div class="site-search">
                    <div class="popup search-popup local-search-popup">
                        <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
                            <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
                            <div class="local-search-input-wrapper">
                                <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text"
                                       id="local-search-input">
                            </div>
                        </div>
                        <div id="local-search-result"></div>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main id="main" class="main">
        <div class="main-inner">
            <div class="content-wrap">
                <div id="content" class="content">

                    <section id="posts" class="posts-expand">

                        <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">

                            <div class="post-body" itemprop="articleBody">
                                <pre>
                                    <code>

  public static void startEnilishRead(Context context) {
        UmsAgentManager.umsAgentCustomerBusiness(context, context.getResources().getString(R.string
                .discovery_1201003));
       /* ReflexCenter.invokeMethodWithParams("com.xueersi.parentsmeeting.modules.englishbook" +
                        ".EnglishBookEnter"
                , "openEnglishBookActivity", new Class[]{Context.class}, new Object[]{context});*/

        XueErSiRouter.startModule(context, "/englishbook/EnglishBookListActivity");
      /*  Module m = AppBll.getInstance().getModuleByModuleName("englishbook");

        if (m == null) {

            m = new Module();
            m.moduleName = "englishbook";

            m.version = "1.0.1";
            m.fileUrl = "https://xeswxapp.oss-cn-beijing.aliyuncs.com/Android/plugin/englishbook/1.0.1/englishbook_1.0.1.apk";
            m.mac = "98887129f80305ad07ec46519546711b";

            m.moduleId = "100004";
            m.title = "英语阅读";
            m.moduleType = 2;//插件类型
        }

        Bundle bundle = new Bundle();
        ModuleHandler.start((Activity)context, new ModuleData(m, bundle));*/
    }
                                    </code>
                                </pre>
                            </div>
                        </article>


                        <article>
                            <div>
                                <pre>
                                    <code>

 public void dispatch(final Activity srcActivity, final Bundle bundle,
                         final int requestCode, final int startIntentFlag) {
        String startModuleString = (String) bundle
                .getSerializable(ModuleData.EXTRAKEY_MODULE);
        final Module startModule = JsonUtil.jsonToObject(startModuleString,
                Module.class);
        if (startModule == null || TextUtils.isEmpty(startModule.moduleName)) {
            // 模块名为空，则不请求
            if (mCallback != null) {
                mCallback.onLost(mData);
            }
            return;
        }
        new StepTask(PLUGINTASKNAME) {
            /**
             * 需要下载的Module信息
             */
            private Module downloadModule = null;

            /**
             * 启动
             */
            @Override
            protected boolean onStart() {
                return true;
            }

            /**
             * 结束
             */
            @Override
            protected void onFinish() {
                dismissProgress();
            }

            /**
             * 步骤一：获取插件的完整信息
             */
            @Override
            protected void onStep1Start() {
                // 模块为插件，则启动
                if (startModule.isPlugin()) {
                    downloadModule = startModule;
                    nextStep();
                    finishStep();
                    return;
                }
                //Fixme
                // 以服务端接口查询的Module信息为准进行下载
                new ModuleModel(srcActivity).getPluginModule(startModule.moduleName,
                        new XueErSiResPonse<Module>() {

                            @Override
                            public boolean onStart() {
                                return showNetProgress(null, null);
                            }

                            @Override
                            public void onFail(NetError exception) {
                                XESToastUtils.showToast(srcActivity, exception.getMsg());
                            }

                            @Override
                            public void onCompleted() {
                                finishStep();
                            }

                            public void onFinish() {
                                finishStep();
                            }

                            @Override
                            public void onSuccess(Module module) {
                                if (module == null) {
                                    return;
                                }
                                // 保存查询到的模块信息到缓存
                                ModuleCache.saveQueryModule(module);
                                // 查询到的模块信息是正确的插件信息，则以此为准进行下载
                                if (module.isPlugin()) {
                                    downloadModule = module;
                                    nextStep();
                                    return;
                                }

                                //查询到的模块信息不是插件，但是可以启动（是本地、插件、或浏览器模块）
                                if (module.canStart()) {
                                    ModuleHandler
                                            .startForResult(srcActivity, module,
                                                    requestCode, startIntentFlag);
                                }
                            }

                        });
            }

            /**
             * 步骤二：下载插件
             */
            @Override
            protected void onStep2Start() {
                if (downloadModule == null) {
                    finishStep();
                    return;
                }

                //如果是测试环境，并且手机文件存储一级目录中含有以该 模块名 命名的的插件apk,则加载测试插件，以方便开发
                if (AppConfig.DEBUG) {
                    String apkFilePath = findPluginFromLocalForDev(mSrcActivity, downloadModule.moduleName + ".apk");
                    if (!TextUtils.isEmpty(apkFilePath)) {
                        startDownloadedModule(srcActivity, apkFilePath,
                                downloadModule, bundle, requestCode, startIntentFlag);
                        finishStep();
                        return;
                    }
                }

                //检查本地是否已经有该版本插件
                if (ModuleManager.isApkDownloaded(downloadModule)) {
                    // 本地已经下载，直接打开
                    String apkFilePath = ModuleManager
                            .getModuleFilePath(downloadModule);
                    startDownloadedModule(srcActivity, apkFilePath,
                            downloadModule, bundle, requestCode, startIntentFlag);
                    finishStep();
                    return;
                }

                final NumberFormat fmt = NumberFormat.getPercentInstance();
                fmt.setMaximumFractionDigits(1);
                // 下载插件
                ModuleManager.downLoadModule(srcActivity, downloadModule,
                        new DownLoadResultHandler() {

                            @Override
                            protected boolean onStart() {

                                return showNetProgress("下载中...", this);
                            }

                            @Override
                            protected void onFinish() {
                                finishStep();
                            }

                            protected void onSuccess(String apkFilePath,
                                                     String message) {
                                startDownloadedModule(srcActivity, apkFilePath,
                                        downloadModule, bundle, requestCode, startIntentFlag);
                            }

                            @Override
                            protected void onProgressChange(long currentLength, long totalLength) {
                                if (mProgressDialog != null && mProgressDialog.isShowing()) {
                                    mProgressDialog.setMessage(fmt.format((float) currentLength / (float) totalLength));
                                }
                            }

                            @Override
                            protected void onFailure(int resultCode,
                                                     String message) {
                                XESToastUtils.showToast(srcActivity, message);
                                UmsAgentManager.umsAgentCustomerBusiness(mSrcActivity, mSrcActivity.getResources().getString(R.string
                                        .plugin_download_fail), UserBll.getInstance().getMyUserInfoEntity().getStuId());
                            }
                        });
            }
        }.execute();
    }

                                    </code>
                                </pre>
                            </div>
                        </article>



                        <article>
                            <div>
                                <pre>
                                    <code>


dependencies {

    api fileTree(include: ['*.jar'], dir: 'libs')
    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {
        exclude group: 'com.android.support', module: 'support-annotations'
    })
    //业务工程：business下面的工程，如果是jekins打包都用aar
    if (System.getenv('isJenkins') == 'true') {
        def propertyNames = bundleVersions.stringPropertyNames()
        String build_feature = System.getenv('BUILD_FEATURE_MODULE')

        //遍历所feature分支
        String[] buildFatureModels
        if (build_feature != null) {
            buildFatureModels = build_feature.split(",")
        }
        Map<String, String> modelsMap = new HashMap<>()

        if (buildFatureModels != null && buildFatureModels.length >= 1) {
            for (int i = 0; i < buildFatureModels.length; i++) {
                String modelValue = buildFatureModels[i]
                if (modelValue != null) {
                    String[] modelValueSplit = modelValue.split(":")
                    modelsMap.put(modelValueSplit[0], modelValueSplit[1])
                }
            }
        }

        propertyNames.each {
            def verstion = bundleVersions.getProperty(it)
            if (System.getenv("BUILD_TYPE") == "Release") {
                println "jenkins release  busines :${it}:${bundleVersions.getProperty(it)}"
                if (verstion.endsWith("-SNAPSHOT")) {
                    def indexof = verstion.lastIndexOf("-")
                    def newVerstion = verstion.substring(0, indexof)
                    println("SUB -SNAPSHOT " + newVerstion)
                    implementation("com.xueersi.bundle:${it}:${newVerstion}") {
                        changing = true
                        transitive = false
                    }
                } else {
                    implementation "com.xueersi.bundle:${it}:${bundleVersions.getProperty(it)}"
                }

            } else {
                if (verstion.endsWith("-SNAPSHOT")) {
                    def buildVerstion = bundleVersions.getProperty(it)
                    def buildModuleName = it.toString()
                    if (modelsMap.containsKey(buildModuleName)) {
                        buildVerstion = modelsMap.get(buildModuleName) + "-SNAPSHOT"
                    }
                    println("fature_verstion :" + buildVerstion)
                    implementation("com.xueersi.bundle:${it}:${buildVerstion}") {
                        changing = true
                        transitive = false
                    }

                } else {
                    implementation "com.xueersi.bundle:${it}:${bundleVersions.getProperty(it)}"
                }
            }

        }
    } else {
        def propertyNames = bundleVersions.stringPropertyNames();
        //遍历项目中的子模块
        rootProject.subprojects.each {

            //遍历项目中的子模块
            if ((it.path.split(':').size() > 2) && it.path.startsWith(":library:")) {
                println("library: module name=" + it)
                rootProject.ext.xeslibraries.put(it.project.name, 'project:' + it.project.name);

            }

            if ((it.path.split(':').size() > 1) && it.path.startsWith(":common")) {
                println("common module name=" + it)
                rootProject.ext.businesslibraries.put(it.project.name, 'project:' + it.project.name);
            }


            if ((it.path.split(':').size() > 2) && it.path.startsWith(":business-base:")) {
                println("business-base module name=" + it)
                rootProject.ext.businesslibraries.put(it.project.name, 'project:' + it.project.name);
            }


            if ((it.path.split(':').size() > 2) && it.path.startsWith(":business:")) {
                println("business module name=" + it)
                if (pluginBusinessOpenStatus.get(it.name) == true) {
                    //此时处于插件状态，不打入
                } else {
                    implementation it
                }
                propertyNames.remove(it.name)
            }

        }

        propertyNames.each {
            println("business aar module name=" + it)
            def verstion = bundleVersions.getProperty(it)
            if (verstion.endsWith("-SNAPSHOT")) {
                implementation("com.xueersi.bundle:${it}:${bundleVersions.getProperty(it)}") {
                    changing = true
                    transitive = false
                }
            } else {
                implementation "com.xueersi.bundle:${it}:${bundleVersions.getProperty(it)}"
            }
        }
    }

//引入business-base
    def businesslibraries = rootProject.ext.businesslibraries
    businesslibraries.values().each {
        /*      implementation(it) {
              changing = true
          }*/
        println("businesslibraries name=:" + it)
        rootProject.xrsImplementation(this.getProject(), it)
    }

//引入学而思基础库
    def xeslibs = rootProject.ext.xeslibraries
    xeslibs.values().each {
        /*     implementation(it) {
             changing = true
             exclude group: 'com.squareup.picasso'
         }*/
        println("xeslibraries name=:" + it)
        rootProject.xrsImplementation(this.getProject(), it)
    }

//引入第三方库
    def thirdlibraries = rootProject.ext.thirdlibraries
    thirdlibraries.values().each {
        implementation(it) {
            changing = true
            exclude group: 'xmlpull', module: 'xmlpull'
        }
    }

 /*   implementation("com.xes.tinker:tinker-android-lib:${TINKER_VERSION}") { changing = true }
    annotationProcessor("com.xes.tinker:tinker-android-anno:${TINKER_VERSION}") {
        changing = true
    }
    implementation("com.xes.tinker:tinker-android-anno:${TINKER_VERSION}") { changing = true }*/

}


                                    </code>
                                </pre>
                            </div>
                        </article>



                        <article>
                            <div>
                                <pre>
                                    <code>


public class XesApplication extends BaseApplication {

    {
        AppConfig.DEBUG = BuildConfig.DEBUG;
        AppConfig.APPLICATION_ID = BuildConfig.APPLICATION_ID;
        AppConfig.APP_NO_UPDATE = BuildConfig.APP_NO_UPDATE;
        AppConfig.XES_TINKER_ID = BuildConfig.XES_TINKER_ID;
        UmsConstants.TINKER_ID = BuildConfig.XES_TINKER_ID;
        Loger.setDebug(BuildConfig.DEBUG);
        LoggerConfig.setEnable(BuildConfig.DEBUG);
    }

    @Override
    public void onCreate() {
//        Loger.d("XesApplication", "creat3");
        super.onCreate();
        long t = System.currentTimeMillis();
//        Loger.d("XesApplication", "creat4");

        if (isPushProcess) {
            create = true;
            return;
        }



        Context context = getApplicationContext();
        // 获取当前包名
        String packageName = context.getPackageName();
        // 获取当前进程名
        String processName = getProcessName(android.os.Process.myPid());
        // 设置是否为上报进程
        CrashReport.UserStrategy strategy = new CrashReport.UserStrategy(context);
        strategy.setAppChannel(AppBll.getInstance().getAppChannel());  //设置渠道
        strategy.setUploadProcess(processName == null || processName.equals(packageName));
        /* Bugly SDK初始化
         * 参数1：上下文对象
         * 参数2：APPID，平台注册时得到,注意替换成你的appId
         * 参数3：是否开启调试模式，调试模式下会输出'CrashReport'tag的日志
         */
        String bublyID = null;
        if (AppConfig.DEBUG) {
            bublyID = "test";//debug 模式
        } else {
            bublyID = "test";//release 模式
        }
        CrashReport.initCrashReport(getApplicationContext(), bublyID, AppConfig.DEBUG, strategy);
        //CrashReport.setUserSceneTag(context, 90213);
        CrashReport.putUserData(context, "appsubversion", AppConfig.XES_TINKER_ID);
        CrashReport.setIsDevelopmentDevice(context, AppConfig.DEBUG);//在开发测试阶段，可以在初始化Bugly之前通过以下接口把调试设备设置成“开发设备”
        if (UserBll.getInstance() != null && UserBll.getInstance().getMyUserInfoEntity() != null) {
            CrashReport.setUserId(UserBll.getInstance().getMyUserInfoEntity().getStuId()); //该用户本次启动后的异常日志用户ID
        }
        //CrashReport.enableBugly(!AppConfig.DEBUG);

        //注册登录成功的通知广播
        IntentFilter filterIn = new IntentFilter(LogInBroadcast.LOGIN_ACTION);
        registerReceiver(new LogInBroadcast(), filterIn);

        //注册登出成功的通知广播
        IntentFilter filterOut = new IntentFilter(LogOutBroadcast.LOGOUT_ACTION);
        registerReceiver(new LogOutBroadcast(), filterOut);

        if (BuildConfig.DEBUG && Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
            WebView.setWebContentsDebuggingEnabled(true);
        }

        if (BuildConfig.DEBUG) {
            //如果是调试模式则初始化Stetho数据库工具
//            Stetho.initializeWithDefaults(this);
        }

        if (getPackageName().equals(processName)) {// 如果是播放器的进程，不进行绑定
//            DownLoadEnter.initDownLoadModule(this);
            ReflexCenter.invokeMethodWithParams("com.xueersi.parentsmeeting.modules.downLoad.DownLoadEnter",
                    "initDownLoadModule",
                    new Class[]{Context.class}, new Object[]{this});
        }

        if (BuildConfig.DEBUG) {
            String HTTP_HOST = mShareDataManager.getString("DEBUG_HTTP_HOST", AppConfig.HTTP_HOST, ShareDataManager
                    .SHAREDATA_NOT_CLEAR);
            String CHAT_HOST = mShareDataManager.getString("DEBUG_CHAT_HOST", AppConfig.CHAT_HOST, ShareDataManager
                    .SHAREDATA_NOT_CLEAR);
            AppConfig.HTTP_HOST = HTTP_HOST;
            AppConfig.CHAT_HOST = CHAT_HOST;
        }
        create = true;


        //访问底部icon接口
        AppBll.getInstance().checkFooterIconUpdate();

        // 初始化AB测试相关的方法
        ABTestManager.getIstance().getTestConfig(UserBll.getInstance().getMyUserInfoEntity().getEnstuId());
        ABTestManager.getIstance().setStuId(UserBll.getInstance().getMyUserInfoEntity().getStuId());
        boolean loadX5 = true;
        if ((getPackageName() + ":ldnet").equals(processName) || (getPackageName() + ":download").equals(processName) || (getPackageName() + ":livedaemon").equals(processName)) {// 如果是推送的进程，不进行初始化数据
            loadX5 = false;
            logger.d("onCreate:processName=" + processName);
        }
        if (loadX5) {
            QbSdk.PreInitCallback cb = new QbSdk.PreInitCallback() {

                @Override
                public void onViewInitFinished(boolean arg0) {
                    // TODO Auto-generated method stub
                    //x5內核初始化完成的回调，为true表示x5内核加载成功，否则表示x5内核加载失败，会自动切换到系统内核。
                    logger.d(" onViewInitFinished is " + arg0);
                }

                @Override
                public void onCoreInitFinished() {
                    // TODO Auto-generated method stub
                }
            };
            //x5内核初始化接口
            QbSdk.initX5Environment(getApplicationContext(), cb);
        }
        logger.i("init_________" + (System.currentTimeMillis() - t));
        //获得用户ip和运营商
        new IpAddressUtil(this);

        // 下载英语听写模型文件
        ReflexCenter.invokeMethodWithParams("com.xueersi.parentsmeeting.modules.endictation.helper.ModelDownloader", "intialize", new Class[]{Context.class}, new Object[]{this});

    }

    @Subscribe(threadMode = ThreadMode.MAIN)
    public void onEventMainThread(LoginActionEvent event) {

        if (!event.isAlreadyLogin()) {
            logger.i("=========logout:processName=" + processName);
            //如果是登出
            ReflexCenter.invokeMethod("com.xueersi.parentsmeeting.modules.answer.AnswerQuestionEnter",
                    "gcAnswerManager");
            ReflexCenter.invokeMethod("com.xueersi.parentsmeeting.modules.pschat.ChatEnter", "logoutClearChatData");
            //ChatEnter.logoutClearChatData();
            ReflexCenter.invokeMethod("com.xueersi.parentsmeeting.modules.personals.PersonalsEnter",
                    "clearMyGoldCache");
            refreshActivty();
            if (("" + processName).contains("live")) {
                logger.i("=========logout:exit");
                Handler handler = new Handler(Looper.getMainLooper());
                handler.postDelayed(new Runnable() {
                    @Override
                    public void run() {
                        System.exit(0);
                    }
                }, 800);
            }
        } else {
            if ((getPackageName()).equals(processName)) {
                AppBll.getInstance().getPatchInfo();
            }
        }
    }

    /**
     * 清除所有的页面，并finish
     */
    public void refreshActivty() {
        // 将关闭所有activity的代码移下来，防止过早关闭，屏幕会黑一下
        logger.i("======finish mListActivity=" + mListActivity.size());
        for (Activity activity : mListActivity) {
            if (activity != null) {
                logger.i("======finish activity=" + activity.getClass().getName());
                if (activity instanceof BaseActivity) {
                    if (activity instanceof LoginActivity) {
                        continue;
                    }
                    ((BaseActivity) activity).finish(BaseActivity.KIEK_ACTIVITY);
                }
            }
        }
        mListActivity.clear();
    }


    /**
     * 获取进程号对应的进程名
     *
     * @param pid 进程号
     * @return 进程名
     */
    private static String getProcessName(int pid) {
        BufferedReader reader = null;
        try {
            reader = new BufferedReader(new FileReader("/proc/" + pid + "/cmdline"));
            String processName = reader.readLine();
            if (!TextUtils.isEmpty(processName)) {
                processName = processName.trim();
            }
            return processName;
        } catch (Throwable throwable) {
            throwable.printStackTrace();
        } finally {
            try {
                if (reader != null) {
                    reader.close();
                }
            } catch (IOException exception) {
                exception.printStackTrace();
            }
        }
        return null;
    }

}


                                    </code>
                                </pre>
                            </div>
                        </article>
                    </section>


                    <nav class="pagination">
                        <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a>
                        <a class="page-number" href="/">1</a>
                        <a class="page-number" href="/page/2/">2</a>
                        <a class="page-number" href="/page/3/">3</a>
                        <span class="page-number current">4</span>
                        <a class="page-number" href="/page/5/">5</a>
                        <a class="extend next" rel="next" href="/page/4/">
                            <i class="fa fa-angle-right"></i></a>
                    </nav>
                </div>
            </div>

            <div class="sidebar-toggle">
                <div class="sidebar-toggle-line-wrap">
                    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
                    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
                    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
                </div>
            </div>

            <aside id="sidebar" class="sidebar">

                <div class="sidebar-inner">


                    <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
                        <div class="site-overview">
                            <div class="site-author motion-element" itemprop="author" itemscope
                                 itemtype="http://schema.org/Person">

                                <img class="site-author-image" itemprop="image" src="/images/avatar.ico" alt="小猪佩奇">

                                <p class="site-author-name" itemprop="name">小猪佩奇</p>
                                <p class="site-description motion-element" itemprop="description"></p>
                            </div>

                            <nav class="site-state motion-element">


                                <div class="site-state-item site-state-posts">

                                    <a href="/archives/">

                                        <span class="site-state-item-count">46</span>
                                        <span class="site-state-item-name">日志</span>
                                    </a>
                                </div>


                                <div class="site-state-item site-state-tags">

                                    <span class="site-state-item-count">6</span>
                                    <span class="site-state-item-name">标签</span>

                                </div>


                            </nav>


                        </div>
                    </section>


                </div>
            </aside>


        </div>
    </main>

    <footer id="footer" class="footer">
        <div class="footer-inner">
            <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
                <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
                <span class="author" itemprop="copyrightHolder">wellcao</span>


            </div>


            <div class="powered-by">
                <i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
            </div>


            <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


        </div>
    </footer>


    <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>

    </div>


</div>


<script type="text/javascript">
    if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
        window.Promise = null;
    }
</script>


<script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>


<script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>


<script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>


<script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>


<script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


<script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


<script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

<script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>


<script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>


<script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
        search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
        isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
        $('.popup').hide();
        $('#local-search-input').val('');
        $('.search-result-list').remove();
        $('#no-result').remove();
        $(".local-search-pop-overlay").remove();
        $('body').css('overflow', '');
    }

    function proceedsearch() {
        $("body")
            .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
            .css('overflow', 'hidden');
        $('.search-popup-overlay').click(onPopupClose);
        $('.popup').toggle();
        var $localSearchInput = $('#local-search-input');
        $localSearchInput.attr("autocapitalize", "none");
        $localSearchInput.attr("autocorrect", "off");
        $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function (path, search_id, content_id) {
        'use strict';

        // start loading animation
        $("body")
            .append('<div class="search-popup-overlay local-search-pop-overlay">' +
                '<div id="search-loading-icon">' +
                '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
                '</div>' +
                '</div>')
            .css('overflow', 'hidden');
        $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

        $.ajax({
            url: path,
            dataType: isXml ? "xml" : "json",
            async: true,
            success: function (res) {
                // get the contents from search data
                isfetched = true;
                $('.popup').detach().appendTo('.header-inner');
                var datas = isXml ? $("entry", res).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get() : res;
                var input = document.getElementById(search_id);
                var resultContent = document.getElementById(content_id);
                var inputEventFunction = function () {
                    var searchText = input.value.trim().toLowerCase();
                    var keywords = searchText.split(/[\s\-]+/);
                    if (keywords.length > 1) {
                        keywords.push(searchText);
                    }
                    var resultItems = [];
                    if (searchText.length > 0) {
                        // perform local searching
                        datas.forEach(function (data) {
                            var isMatch = false;
                            var hitCount = 0;
                            var searchTextCount = 0;
                            var title = data.title.trim();
                            var titleInLowerCase = title.toLowerCase();
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            var contentInLowerCase = content.toLowerCase();
                            var articleUrl = decodeURIComponent(data.url);
                            var indexOfTitle = [];
                            var indexOfContent = [];
                            // only match articles with not empty titles
                            if (title != '') {
                                keywords.forEach(function (keyword) {
                                    function getIndexByWord(word, text, caseSensitive) {
                                        var wordLen = word.length;
                                        if (wordLen === 0) {
                                            return [];
                                        }
                                        var startPosition = 0, position = [], index = [];
                                        if (!caseSensitive) {
                                            text = text.toLowerCase();
                                            word = word.toLowerCase();
                                        }
                                        while ((position = text.indexOf(word, startPosition)) > -1) {
                                            index.push({position: position, word: word});
                                            startPosition = position + wordLen;
                                        }
                                        return index;
                                    }

                                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                                });
                                if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                                    isMatch = true;
                                    hitCount = indexOfTitle.length + indexOfContent.length;
                                }
                            }

                            // show search results

                            if (isMatch) {
                                // sort index by position of keyword

                                [indexOfTitle, indexOfContent].forEach(function (index) {
                                    index.sort(function (itemLeft, itemRight) {
                                        if (itemRight.position !== itemLeft.position) {
                                            return itemRight.position - itemLeft.position;
                                        } else {
                                            return itemLeft.word.length - itemRight.word.length;
                                        }
                                    });
                                });

                                // merge hits into slices

                                function mergeIntoSlice(text, start, end, index) {
                                    var item = index[index.length - 1];
                                    var position = item.position;
                                    var word = item.word;
                                    var hits = [];
                                    var searchTextCountInSlice = 0;
                                    while (position + word.length <= end && index.length != 0) {
                                        if (word === searchText) {
                                            searchTextCountInSlice++;
                                        }
                                        hits.push({position: position, length: word.length});
                                        var wordEnd = position + word.length;

                                        // move to next position of hit

                                        index.pop();
                                        while (index.length != 0) {
                                            item = index[index.length - 1];
                                            position = item.position;
                                            word = item.word;
                                            if (wordEnd > position) {
                                                index.pop();
                                            } else {
                                                break;
                                            }
                                        }
                                    }
                                    searchTextCount += searchTextCountInSlice;
                                    return {
                                        hits: hits,
                                        start: start,
                                        end: end,
                                        searchTextCount: searchTextCountInSlice
                                    };
                                }

                                var slicesOfTitle = [];
                                if (indexOfTitle.length != 0) {
                                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                                }

                                var slicesOfContent = [];
                                while (indexOfContent.length != 0) {
                                    var item = indexOfContent[indexOfContent.length - 1];
                                    var position = item.position;
                                    var word = item.word;
                                    // cut out 100 characters
                                    var start = position - 20;
                                    var end = position + 80;
                                    if (start < 0) {
                                        start = 0;
                                    }
                                    if (end < position + word.length) {
                                        end = position + word.length;
                                    }
                                    if (end > content.length) {
                                        end = content.length;
                                    }
                                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                                }

                                // sort slices in content by search text's count and hits' count

                                slicesOfContent.sort(function (sliceLeft, sliceRight) {
                                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                                        return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                                        return sliceRight.hits.length - sliceLeft.hits.length;
                                    } else {
                                        return sliceLeft.start - sliceRight.start;
                                    }
                                });

                                // select top N slices in content

                                var upperBound = parseInt('1');
                                if (upperBound >= 0) {
                                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                                }

                                // highlight title and content

                                function highlightKeyword(text, slice) {
                                    var result = '';
                                    var prevEnd = slice.start;
                                    slice.hits.forEach(function (hit) {
                                        result += text.substring(prevEnd, hit.position);
                                        var end = hit.position + hit.length;
                                        result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                                        prevEnd = end;
                                    });
                                    result += text.substring(prevEnd, slice.end);
                                    return result;
                                }

                                var resultItem = '';

                                if (slicesOfTitle.length != 0) {
                                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                                } else {
                                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                                }

                                slicesOfContent.forEach(function (slice) {
                                    resultItem += "<a href='" + articleUrl + "'>" +
                                        "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                                        "...</p>" + "</a>";
                                });

                                resultItem += "</li>";
                                resultItems.push({
                                    item: resultItem,
                                    searchTextCount: searchTextCount,
                                    hitCount: hitCount,
                                    id: resultItems.length
                                });
                            }
                        })
                    }
                    ;
                    if (keywords.length === 1 && keywords[0] === "") {
                        resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
                    } else if (resultItems.length === 0) {
                        resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
                    } else {
                        resultItems.sort(function (resultLeft, resultRight) {
                            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                                return resultRight.searchTextCount - resultLeft.searchTextCount;
                            } else if (resultLeft.hitCount !== resultRight.hitCount) {
                                return resultRight.hitCount - resultLeft.hitCount;
                            } else {
                                return resultRight.id - resultLeft.id;
                            }
                        });
                        var searchResultList = '<ul class=\"search-result-list\">';
                        resultItems.forEach(function (result) {
                            searchResultList += result.item;
                        })
                        searchResultList += "</ul>";
                        resultContent.innerHTML = searchResultList;
                    }
                }

                if ('auto' === 'auto') {
                    input.addEventListener('input', inputEventFunction);
                } else {
                    $('.search-icon').click(inputEventFunction);
                    input.addEventListener('keypress', function (event) {
                        if (event.keyCode === 13) {
                            inputEventFunction();
                        }
                    });
                }

                // remove loading animation
                $(".local-search-pop-overlay").remove();
                $('body').css('overflow', '');

                proceedsearch();
            }
        });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function (e) {
        e.stopPropagation();
        if (isfetched === false) {
            searchFunc(path, 'local-search-input', 'local-search-result');
        } else {
            proceedsearch();
        }
        ;
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function (e) {
        e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
        var shouldDismissSearchPopup = event.which === 27 &&
            $('.search-popup').is(':visible');
        if (shouldDismissSearchPopup) {
            onPopupClose();
        }
    });
</script>


</body>
</html>
